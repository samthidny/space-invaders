{"id":"QcRT","dependencies":[{"name":"/Users/asmit844/Personal/space-invaders/package.json","includedInParent":true,"mtime":1659568623279},{"name":"./constants.js","loc":{"line":1,"column":421},"parent":"/Users/asmit844/Personal/space-invaders/src/game.js","resolved":"/Users/asmit844/Personal/space-invaders/src/constants.js"},{"name":"./game-item.js","loc":{"line":2,"column":25},"parent":"/Users/asmit844/Personal/space-invaders/src/game.js","resolved":"/Users/asmit844/Personal/space-invaders/src/game-item.js"},{"name":"./game-model.js","loc":{"line":3,"column":26},"parent":"/Users/asmit844/Personal/space-invaders/src/game.js","resolved":"/Users/asmit844/Personal/space-invaders/src/game-model.js"},{"name":"./keyboard-manager.js","loc":{"line":4,"column":32},"parent":"/Users/asmit844/Personal/space-invaders/src/game.js","resolved":"/Users/asmit844/Personal/space-invaders/src/keyboard-manager.js"},{"name":"./renderer.js","loc":{"line":5,"column":25},"parent":"/Users/asmit844/Personal/space-invaders/src/game.js","resolved":"/Users/asmit844/Personal/space-invaders/src/renderer.js"},{"name":"./sound-manager.js","loc":{"line":6,"column":29},"parent":"/Users/asmit844/Personal/space-invaders/src/game.js","resolved":"/Users/asmit844/Personal/space-invaders/src/sound-manager.js"}],"generated":{"js":"var $QcRT$exports={};function $QcRT$var$_typeof(e){return($QcRT$var$_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function $QcRT$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function $QcRT$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $QcRT$var$_createClass(e,t,r){return t&&$QcRT$var$_defineProperties(e.prototype,t),r&&$QcRT$var$_defineProperties(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function $QcRT$var$_inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");Object.defineProperty(e,\"prototype\",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&$QcRT$var$_setPrototypeOf(e,t)}function $QcRT$var$_createSuper(e){var t=$QcRT$var$_isNativeReflectConstruct();return function(){var r,i=$QcRT$var$_getPrototypeOf(e);if(t){var n=$QcRT$var$_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return $QcRT$var$_possibleConstructorReturn(this,r)}}function $QcRT$var$_possibleConstructorReturn(e,t){if(t&&(\"object\"===$QcRT$var$_typeof(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return $QcRT$var$_assertThisInitialized(e)}function $QcRT$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function $QcRT$var$_wrapNativeSuper(e){var t=\"function\"==typeof Map?new Map:void 0;return($QcRT$var$_wrapNativeSuper=function(e){if(null===e||!$QcRT$var$_isNativeFunction(e))return e;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return $QcRT$var$_construct(e,arguments,$QcRT$var$_getPrototypeOf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),$QcRT$var$_setPrototypeOf(r,e)})(e)}function $QcRT$var$_construct(e,t,r){return($QcRT$var$_construct=$QcRT$var$_isNativeReflectConstruct()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var n=new(Function.bind.apply(e,i));return r&&$QcRT$var$_setPrototypeOf(n,r.prototype),n}).apply(null,arguments)}function $QcRT$var$_isNativeReflectConstruct(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function $QcRT$var$_isNativeFunction(e){return-1!==Function.toString.call(e).indexOf(\"[native code]\")}function $QcRT$var$_setPrototypeOf(e,t){return($QcRT$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $QcRT$var$_getPrototypeOf(e){return($QcRT$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}$parcel$require(\"QcRT\",\"./constants.js\"),$parcel$require(\"QcRT\",\"./game-item.js\"),$parcel$require(\"QcRT\",\"./game-model.js\"),$parcel$require(\"QcRT\",\"./keyboard-manager.js\"),$parcel$require(\"QcRT\",\"./renderer.js\"),$parcel$require(\"QcRT\",\"./sound-manager.js\");var $QcRT$export$Game=function(e){$QcRT$var$_inherits(r,$QcRT$var$_wrapNativeSuper(EventTarget));var t=$QcRT$var$_createSuper(r);function r(){return $QcRT$var$_classCallCheck(this,r),t.call(this)}return $QcRT$var$_createClass(r,[{key:\"init\",value:function(){this.gameLoopsPerSecond=$QcRT$import$GAME_LOOPS_PER_SECOND,this.isPaused=!0,this.frameCount=0,this.renderCount=0,this.gameInProgress=!1,this.gameIsOver=!1,this.keyboard=new $QcRT$import$KeyboardManager,this.model=new $QcRT$import$GameModel,this.interval=null,this.renderer=new $QcRT$import$Renderer(this.model),this.soundManager=new $QcRT$import$SoundManager,this.renderCount=0,this.model.level=1,this.model.lives=$QcRT$import$NUM_LIVES,this.model.score=0,this.enemyStaggerFrequency=$QcRT$import$ENEMY_STAGGER_FRAMES_MAX,this.maxActiveBombs=1,this.enemyStartY=50,this.initLevel(),document.addEventListener(\"keyup\",this.keyUpHandler.bind(this)),this.renderer.clear(),this.renderer.init()}},{key:\"keyUpHandler\",value:function(e){\"Space\"==e.code&&this.numActiveMissiles<$QcRT$import$MAX_ACTIVE_MISSILES&&(this.fireMissile=!0,this.numActiveMissiles++)}},{key:\"initLevel\",value:function(){var e=this;this.model.sprites=[],this.renderer.clear(),this.currentEnemyRow=$QcRT$import$NUM_ENEMY_ROWS,this.numActiveMissiles=0,this.numActiveBombs=0;for(var t=0;t<$QcRT$import$NUM_ENEMY_ROWS;t++)for(var r=0;r<11;r++){var i=\"enemy\"+(t+1),n=new $QcRT$import$GameItem(\"enemy\",($QcRT$import$ENEMY_SIZE+$QcRT$import$ENEMY_X_SPACE)*r,($QcRT$import$ENEMY_SIZE+$QcRT$import$ENEMY_Y_SPACE)*t+this.enemyStartY,$QcRT$import$ENEMY_SIZE,$QcRT$import$ENEMY_SIZE,{column:r,row:t,sprite:i});n.sprite=i,this.model.addSprite(n)}var o=function(t,r){for(var i=0;i<5;i++)for(var n=0;n<6;n++){4===i&&n>1&&n<4||e.model.addSprite(new $QcRT$import$GameItem(\"shield\",t+10*n,r+10*i,10,10))}};for(r=0;r<4;r++)o(50+$QcRT$import$SHIELD_WIDTH*r+50*r,400);this.hasShields=!0,this.removeShields=!1,this.enemyDirection=1,this.enemySpeed=$QcRT$import$ENEMY_SPEED,this.enemyStaggerFrequency=this.enemyStaggerFrequency=this.calculateEnemyStaggerFrequency(55),this.moveEnemyCount=0,this.tank=this.model.addSprite(new $QcRT$import$GameItem(\"tank\",this.model.gameWidth/2,this.model.gameHeight-$QcRT$import$DEFAULT_SPRITE_SIZE,24,24)),this.tankSpeed=$QcRT$import$TANK_SPEED,this.fireMissile=!1}},{key:\"levelComplete\",value:function(){alert(\"LEVEL COMPLETE\"),this.nextLevel()}},{key:\"gameOver\",value:function(){console.log(\"GAME OVER\"),this.stop(),this.dispatchEvent(new CustomEvent(\"GAME_OVER\"))}},{key:\"start\",value:function(){var e=this;if(!this.gameInProgress)if(this.isPaused=!1,this.gameInProgress=!0,this.renderer.render(),$QcRT$import$USE_ANIMATION_FRAME)this.animationFrameGameLoop();else{var t=Math.round(1e3/this.gameLoopsPerSecond);console.log(\"intervalSpeed\",t),this.interval=setInterval(function(){e.gameLoop()},t)}}},{key:\"stop\",value:function(){this.isPaused=!0,clearInterval(this.interval),this.gameInProgress=!1}},{key:\"restart\",value:function(){this.init()}},{key:\"_calculateEnemyStaggerFrequency\",value:function(e){var t=1-e/55,r=1-t*t,i=$QcRT$import$ENEMY_STAGGER_FRAMES_MAX-$QcRT$import$ENEMY_STAGGER_FRAMES_MIN,n=$QcRT$import$ENEMY_STAGGER_FRAMES_MIN+Math.ceil(r*i);return console.log(\"New Enemy Stagger\",e,n),n}},{key:\"calculateEnemyStaggerFrequency\",value:function(e){for(var t=[[55,1],[50,.95],[45,.9],[40,.85],[35,.8],[30,.75],[25,.7],[20,.6],[15,.5],[10,.4],[9,.35],[8,.3],[7,.25],[6,.2],[5,.15],[4,.1],[3,.07],[2,.05],[1,.01]],r=$QcRT$import$ENEMY_STAGGER_FRAMES_MAX-$QcRT$import$ENEMY_STAGGER_FRAMES_MIN,i=0;i<t.length;i++)if(e>=t[i][0]){var n=t[i][1];return $QcRT$import$ENEMY_STAGGER_FRAMES_MIN+Math.ceil(n*r)}}},{key:\"speedUpEnemyMovement\",value:function(){this.enemyStaggerFrequency-=2,console.log(\"New Stagger Frequency\",this.enemyStaggerFrequency),this.enemyStaggerFrequency<1&&(this.enemyStaggerFrequency=1)}},{key:\"nextLevel\",value:function(){this.model.level+=1,this.enemyStartY+=$QcRT$import$ENEMY_LEVEL_INCREASE_Y,this.initLevel()}},{key:\"animationFrameGameLoop\",value:function(){var e=this;this.gameInProgress&&requestAnimationFrame(function(){e.gameLoop()})}},{key:\"gameLoop\",value:function(){var e=this,t=function(t){return e.model.sprites.filter(function(e){return e.type===t&&e.isAlive})},r=!1,i=$QcRT$import$TANK_MARGIN,n=$QcRT$import$GAME_WIDTH-($QcRT$import$TANK_MARGIN+this.tank.width);this.keyboard.keyDown.ArrowRight&&(this.tank.x+=this.tankSpeed,this.tank.x>n&&(this.tank.x=n)),this.keyboard.keyDown.ArrowLeft&&(this.tank.x-=this.tankSpeed,this.tank.x<i&&(this.tank.x=i)),this.fireMissile&&(this.model.addSprite(new $QcRT$import$GameItem(\"missile\",this.tank.x+.5*this.tank.width,this.tank.y,$QcRT$import$MISSILE_WIDTH,$QcRT$import$MISSILE_HEIGHT)),this.fireMissile=!1),this.fireBomb&&this.firingEnemy&&this.numActiveBombs<this.maxActiveBombs&&(this.model.addSprite(new $QcRT$import$GameItem(\"bomb\",this.firingEnemy.x+.5*$QcRT$import$DEFAULT_SPRITE_SIZE,this.firingEnemy.y+.5*$QcRT$import$DEFAULT_SPRITE_SIZE,2,20)),this.fireBomb=!1,this.numActiveBombs++,this.firingEnemy=null),this.fireMysteryShip&&(this.model.addSprite(new $QcRT$import$GameItem(\"mystery-ship\",0,10,40,10)),this.fireMysteryShip=!1);var o=t(\"enemy\"),s=t(\"shield\"),a=t(\"mystery-ship\");this.removeShields&&(s.forEach(function(e){return e.isAlive=!1}),this.removeShields=!1,this.hasShields=!1),0===o.length&&this.nextLevel(),this.moveEnemyCount%this.enemyStaggerFrequency==0&&(o.forEach(function(t){t.x+=e.enemyDirection*e.enemySpeed,e.enemyDirection>0&&t.x+t.width>=e.model.gameWidth&&(r=!0),e.enemyDirection<0&&t.x<=0&&(r=!0)}),this.currentEnemyRow--,this.currentEnemyRow<0&&(this.currentEnemyRow=$QcRT$import$NUM_ENEMY_ROWS-1),this.moveEnemyCount=0);var c=[];o.forEach(function(e){if(e.isAlive){var t=e.metadata.column;c[t]=e}}),0===Math.floor(40*Math.random())&&(this.fireBomb=!0,this.firingEnemy=c[Math.floor(Math.random()*c.length-1)]),0===Math.floor(100*Math.random())&&0===a.length&&(this.fireMysteryShip=!0);var $=t(\"missile\");$.forEach(function(e){e.y-=$QcRT$import$MISSILE_SPEED});var m=t(\"bomb\");m.forEach(function(e){e.y+=$QcRT$import$BOMB_SPEED}),a.forEach(function(e){e.x+=1}),r&&(this.enemyDirection*=-1,o.forEach(function(e){e.y+=$QcRT$import$ENEMY_SIZE}),r=!1);var u=function(e,t){if(e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y)return!0};$.forEach(function(t){a.forEach(function(r){e.numActiveMissiles&&u(t,r)&&(r.isAlive=!1,t.isAlive=!1,e.numActiveMissiles--,e.model.score+=1e3)}),o.forEach(function(r){e.numActiveMissiles&&u(t,r)&&(r.isAlive=!1,t.isAlive=!1,e.numActiveMissiles--,r.metadata.row>3?e.model.score+=10:r.metadata.row>1?e.model.score+=20:e.model.score+=30,e.enemyStaggerFrequency=e.calculateEnemyStaggerFrequency(o.length-1))}),s.forEach(function(r){e.numActiveMissiles&&u(t,r)&&(r.isAlive=!1,t.isAlive=!1,e.numActiveMissiles--)}),t.y<0&&(t.isAlive=!1,e.numActiveMissiles--)}),m.forEach(function(t){u(t,e.tank)&&(t.isAlive=!1,e.numActiveBombs--,e.tank.lives--,e.model.lives--),s.forEach(function(r){u(t,r)&&(t.isAlive=!1,r.isAlive=!1,e.numActiveBombs--)}),t.y>e.model.gameHeight&&(t.isAlive=!1,e.numActiveBombs--),e.numActiveBombs<0&&(e.numActiveBombs=0)}),o.forEach(function(t){e.hasShields&&t.y>=$QcRT$import$ENEMY_SHIELD_LIMIT&&(e.removeShields=!0),t.y>=$QcRT$import$ENEMY_GROUND_LIMIT&&(e.gameIsOver=!0)}),a.forEach(function(e){e.x>=$QcRT$import$GAME_WIDTH&&(e.isAlive=!1)}),this.renderer.render(),this.moveEnemyCount++,0===this.model.lives&&(this.gameIsOver=!0),this.gameIsOver&&this.gameOver(),$QcRT$import$USE_ANIMATION_FRAME?!this.isPaused&&this.gameInProgress&&this.animationFrameGameLoop():!this.isPaused&&this.gameInProgress||clearInterval(this.interval),this.model.removeDeadSprites();var l=.8*this.enemyStaggerFrequency;console.log(l),this.frameCount+=1,this.frameCount>=Math.max(l,20)&&(this.soundManager.playNote(),this.frameCount=0)}}]),r}();$QcRT$exports.Game=$QcRT$export$Game,window.game=new $QcRT$export$Game,window.game.init();"},"sourceMaps":null,"error":null,"hash":"3cd238bad77f84446872d9c97ebe9fc5","cacheData":{"env":{},"imports":{"$QcRT$import$BOMB_SPEED":["./constants.js","BOMB_SPEED"],"$QcRT$import$DEFAULT_SPRITE_SIZE":["./constants.js","DEFAULT_SPRITE_SIZE"],"$QcRT$import$ENEMY_GROUND_LIMIT":["./constants.js","ENEMY_GROUND_LIMIT"],"$QcRT$import$ENEMY_SIZE":["./constants.js","ENEMY_SIZE"],"$QcRT$import$ENEMY_LEVEL_INCREASE_Y":["./constants.js","ENEMY_LEVEL_INCREASE_Y"],"$QcRT$import$ENEMY_STAGGER_FRAMES_MIN":["./constants.js","ENEMY_STAGGER_FRAMES_MIN"],"$QcRT$import$ENEMY_STAGGER_FRAMES_MAX":["./constants.js","ENEMY_STAGGER_FRAMES_MAX"],"$QcRT$import$ENEMY_X_SPACE":["./constants.js","ENEMY_X_SPACE"],"$QcRT$import$ENEMY_Y_SPACE":["./constants.js","ENEMY_Y_SPACE"],"$QcRT$import$ENEMY_SPEED":["./constants.js","ENEMY_SPEED"],"$QcRT$import$ENEMY_SHIELD_LIMIT":["./constants.js","ENEMY_SHIELD_LIMIT"],"$QcRT$import$GAME_LOOPS_PER_SECOND":["./constants.js","GAME_LOOPS_PER_SECOND"],"$QcRT$import$GAME_WIDTH":["./constants.js","GAME_WIDTH"],"$QcRT$import$GAME_HEIGHT":["./constants.js","GAME_HEIGHT"],"$QcRT$import$MAX_ACTIVE_MISSILES":["./constants.js","MAX_ACTIVE_MISSILES"],"$QcRT$import$MISSILE_WIDTH":["./constants.js","MISSILE_WIDTH"],"$QcRT$import$MISSILE_HEIGHT":["./constants.js","MISSILE_HEIGHT"],"$QcRT$import$MISSILE_SPEED":["./constants.js","MISSILE_SPEED"],"$QcRT$import$NUM_ENEMY_ROWS":["./constants.js","NUM_ENEMY_ROWS"],"$QcRT$import$NUM_LIVES":["./constants.js","NUM_LIVES"],"$QcRT$import$SHIELD_WIDTH":["./constants.js","SHIELD_WIDTH"],"$QcRT$import$TANK_SPEED":["./constants.js","TANK_SPEED"],"$QcRT$import$TANK_MARGIN":["./constants.js","TANK_MARGIN"],"$QcRT$import$USE_ANIMATION_FRAME":["./constants.js","USE_ANIMATION_FRAME"],"$QcRT$import$GameItem":["./game-item.js","GameItem"],"$QcRT$import$GameModel":["./game-model.js","GameModel"],"$QcRT$import$KeyboardManager":["./keyboard-manager.js","KeyboardManager"],"$QcRT$import$Renderer":["./renderer.js","Renderer"],"$QcRT$import$SoundManager":["./sound-manager.js","SoundManager"]},"exports":{"Game":"$QcRT$export$Game"},"wildcards":[],"sideEffects":true,"isES6Module":true,"shouldWrap":false}}